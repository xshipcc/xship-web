# drone-react

## 时间表

|概要设计|闵远洋|2023/8/10|2023/8/11|||
|-|-|-|-|-|-|
|详细设计|闵远洋|2023/8/14|2023/8/18|||
|基础平台-无人机管理|闵远洋|2023/8/21|2023/8/28|||
|基础平台-数据系统|闵远洋|2023/8/22|2023/9/5|||
|基础平台-管理员管理|闵远洋|2023/8/23|2023/9/5|||
|基础平台-访客管理|闵远洋|2023/8/24|2023/9/6|||
|基础平台-操作员管理|闵远洋|2023/8/26|2023/9/6|||
|基础平台-数据权限管理|闵远洋|2023/8/25|2023/9/10|||
|综合监控-无人机状态显示|闵远洋|2023/9/11|2023/9/15|||
|综合监控-载荷状态显示|闵远洋|2023/9/13|2023/9/18|||
|综合监控-机场状态显示|闵远洋|2023/8/20|2023/8/25|||
|综合监控-机场控制|闵远洋|2023/9/19|2023/9/22|||
|无人机飞控对接 10 条左右指令|闵远洋|2023/9/5|2023/9/25|||
|AI 智能告警-算法定制-人员检测|闵远洋|2023/9/4|2023/10/10|||
|AI 智能告警-算法定制-人脸识别|闵远洋|2023/9/4|2023/10/10|||
|AI 智能告警-算法定制-车辆检测|闵远洋|2023/9/4|2023/10/10|||
|AI 智能告警-算法定制-火焰烟雾|闵远洋|2023/9/4|2023/10/10|||
|AI 智能告警-算法定制-差异比对|闵远洋|2023/9/4|2023/10/10|||
|AI 智能化软硬一体平台硬件联调|闵远洋|2023/9/25|2023/10/20|||
|告警系统-告警分类融合|闵远洋|2023/9/11|2023/9/15|||
|告警系统-告警 pdf 生成|闵远洋|2023/9/18|2023/9/22|||
|可视化平台-实时巡检报警平台|闵远洋|2023/8/27|2023/9/1|||
|可视化平台-离线地图数据|闵远洋|2023/8/23|2023/9/10|||
|可视化平台-视频监控平台|闵远洋|2023/9/23|2023/9/28|||
|可视化系统-态势展示和统计|闵远洋|2023/10/5|2023/10/20|||
|可视化系统-历史回放|闵远洋|2023/10/15|2023/10/20|||
|可视化系统-人机跟踪系统|闵远洋|2023/10/15|2023/10/20|||
|系统联合测试|闵远洋|2023/10/23|2023/10/27|||
|验收测试|闵远洋|2023/10/25|2023/10/30|||

## 需求表

|无人机自动巡检平台||||
|-|-|-|-|
|**具体需求列表**|**具体需求列表描述**|功能范围|**需求列表备注**|
|无人机管理|输入 IP 地址绑定设备,需要甲方提供可控无人机，数据链接许可，建立无人机编号，未接入将无法控制|2\.无人机管理||
|数据系统|根据讯飞特征，设计，并建立历史数据数据系统回放服务|4\.综合监控||
|管理员管理|超级管理员管理，只有超级管理员可以添加人|1\.系统管理||
||操作管理员（当前，报表，统计，历史，报警）|1\.系统管理||
||访客 （当前飞行状态，不能看报警）|1\.系统管理||
|访客角色|允许超级管理员，开关就可以，增加时间限制。|1\.系统管理||
|操作员管理|可以操作无人机操作员管理|1\.系统管理||
|操作日志|所有操作历史，保留日志（查看）|1\.系统管理||
|角色权限管理|综合，数据查看权限，控制权限，添加权限，|1\.系统管理||
||添加管理 角色 对某个单元的控制权限|1\.系统管理||
|综合监控|无人机状态显示|4\.综合监控|无人机状态显示，包含无人机电池电量、导航强度、无人机姿态、航向、位置等信息；设备三：飞控设备|
|载荷状态显示|包含载荷姿态、变倍倍数、工作模式等信息；|4\.综合监控||
||摄像头，先采用 RTSP 协议，如何控制定位 设备四：可控摄像头协议|4\.综合监控||
|通信链路状态显示|包含信号强度、通信频段等。设备二数据链设备：读取数据包。|4\.综合监控||
|机场状态显示|包含气象、充放电状态、机库开启关闭状态等；机场是不是需要额外对接？设备一：机库系统|4\.综合监控||
|无人机飞行控制|包含自动无人机派发 寻飞任务，起飞、降落、返航、切手控等 设备三：飞控设备|2\.无人机管理||
|载荷控制|先以一套摄像头控制通道指令位置。同时加载 6 个 明确协议指令|4\.综合监控||
|机场控制|a) 包含开盖、关盖等远程控制；|2\.无人机管理||
||后续调试对接。|2\.无人机管理||
|链路控制|包含频段切换、远程上下电等|2\.无人机管理||
|告警与应急返航|具备电压告警值预设功能，全程监控飞机电池，电压低于预设电压值时有明显的声光报警提示，电压低到设定报警压值时，无人机能够自主返航，具备导航信号、通信链路中断检测功能，当测控链路中断时，无人机能够自主返航；|4\.综合监控||
||（倒计时 15 秒 自动返航）确定返航标准。|||
|海康摄像头接入|j)可接入多路海康监控数据，支持分屏显示；我们的头的哦都市海康的么？|4\.综合监控||
|任务管控|任务创建|2\.无人机管理|包含多机的巡逻航线、飞行任务、值班操作员、任务开始时间等信息编辑，为多机分配定时任务|
|任务编辑|可对飞行任务进行航点位置、载荷姿态、执行算法等进行详细编辑；|2\.无人机管理||
|历史任务查看|可以查看历史任务记录和检测结果|2\.无人机管理||
|任务库管理|可创建、存储、删除、查看飞行任务库，可通过地图绘制、人工录入等不同方式创建飞行任务，形成任务库；|2\.无人机管理||
|航线规划|在卫星地图上人工规划航线，显示航线距离起点的距离，航线可拖动、编辑；可在航点上叠加绘制载荷扫描航线；路径规划先发到飞控软件|2\.无人机管理||
|自动巡检任务|无人机可以根据编辑任务自主执行警戒巡逻，发现问题，进行报警，然后弹出提示，操作员进行手动操作观察异常|2\.无人机管理||
||AI 定制算法|3\.智能告警|人员检测|
||车辆检测|3\.智能告警||
||入侵检测|3\.智能告警||
||火焰烟雾检测|3\.智能告警||
||人脸识别|3\.智能告警||
||差异比对？|3\.智能告警||
|AI 智能化软硬一体平台|基于英伟达 jetson 系列主板或者英伟达 GPU 服务器 一台，8G 内存，暂时使用这个做数据服务器，如果容量问题，再分出另外一个独立的系统|3\.智能告警||
|告警 pdf 生成|查询告警网页生成 pdf ，支持图文 生成|3\.智能告警|1|
|告警分类|支持分级智能告警，可根据时间、空间、目标属性等要素进行智能告警|3\.智能告警|1|
|回放|多路视频回放、无人机数据回放、报警 、同步回放|4\.综合监控||
|集成第三方 NVR 服务|需要开发 集成 独有 NVR 支持 NVR 视频显示和存储，监控和回放功能：时间段，同步回放（摄像机，飞机数据）可选择式回放。|4\.综合监控|1|
|海康 NVR|部署一套录像设备 （海康，大华）实现录像回放 ，接监控大屏|4\.综合监控|0|
|无人机飞控系统调试|无人机控制系统|2\.无人机管理|至少支持 10 个以上指令控制，无人机远程控制系统。以服务器时间为准。|
|无人机起飞|机库开盖、上电、自检、传航线、航线成功、解锁、起飞、位置移动 5 米、关盖|2\.无人机管理|1|
|无人机飞回|无人机失联|2\.无人机管理|正常返回，舱盖自动打开、停车（锁死）、归位、关电、关盖。|
|可视化平台|巡检可视化平台|2\.无人机管理|巡逻成果可视化，无人机飞行时间、总时间、里程、总里程、发现异常事件数量等成果信息统计图表可视化。|
||地图发现异常点位置|2\.无人机管理||
|地图实时态势展现|地图 实时展示无人机位置态势，实时通讯无人机位置和照片|2\.无人机管理|1|
|地图数据|采用我们买的数据进行数据标注|2\.无人机管理|1|
|实时视频监控平台|采用 NVR 输出做监控，WEB 最多支持支持 6 路视频同屏显示|4\.综合监控|1|
|历史回放|时间对齐存储，将载荷遥测、飞控遥测按时间对齐存储，可以通过播放形式，回看历史数据。需要展示飞行路线，每个时段飞行照片和路线上的报警|4\.综合监控|1|
|||||
|**新增**|**新增**|**新增**|**新增**|
|无人机机库?||||
|||||
|||||
|||||
|||||

## 系统拆分

### 侧边栏内容

||新|旧|
|-|-|-|
|***侧边栏内容***|1\.系统管理(drone)|系统管理|
||2\.无人机管理(含可视化大屏)|矿场管理|
||3\.智能告警|ai 监管|
||4\.巡检可视化大屏|地图|
||||
||||

---

### 1\.系统管理

|基础平台-管理员管理|闵远洋|2023/8/23|2023/9/5||
|-|-|-|-|-|
|基础平台-访客管理|闵远洋|2023/8/24|2023/9/6||
|基础平台-操作员管理|闵远洋|2023/8/26|2023/9/6||
|基础平台-数据权限管理|闵远洋|2023/8/25|2023/9/10||
||||||

||子菜单|功能描述|
|-|-|-|
|系统管理|组织机构管理(超级管理员)|1\. 超级管理员权限:添加访客和访客的权限 2.添加操作管理员|
||操作管理员|1\. 对操作管理员进行添加(操作管理员能够添加操作员,分配任务)|
||访客管理|1\. 添加访客|
||执飞员管理|1\. 由 操作员进行添加 执飞员,|
||操作日志||

- 具体实现

1. 组织机构管理(super)

   1. 登录进入直接进入系统管理界面且只有超级管理员可以进行系统管理界面

   2. 超级管理员只能看到系统管理界面的内容

   3. 操作员可以看到所有界面, 但是排除系统管理下的子菜单 组织机构管理和操作员管理(同级菜单栏不展示)

2. 操作员管理

   1. 对操作员进行添加和删除

3. 访客管理

   1. 对访客进行添加和访客权限进行控制

4. 执飞员管理

   1. 添加执飞人员,进行管理

5. 操作日志

* [ ] 对操作日志进行查看 操作日志的信息来源为 操作员和管理员

```mermaid
```

- 完成进度

* [ ] 组织机构管理(super)

* [ ] 登录进入直接进入系统管理界面且只有超级管理员可以进行系统管理界面

* [ ] 超级管理员只能看到系统管理界面的内容

* [ ] 操作员可以看到所有界面, 但是排除系统管理下的子菜单 组织机构管理和操作员管理(同级菜单栏不展示)

* [ ] 操作员管理

* [ ] 对操作员进行添加和删除

* [ ] 访客管理

* [ ] 对访客进行添加和访客权限进行控制

* [ ] 执飞员管理

* [ ] 添加执飞人员,进行管理

* [ ] 操作日志

* [ ] 对操作日志进行查看 操作日志的信息来源为 操作员和管理员

---

### 2\.无人机管理(含可视化平台)

|无人机飞控对接 10 条左右指令|闵远洋|2023/9/5|2023/9/25|
|-|-|-|-|
|基础平台-无人机管理|闵远洋|2023/8/21|2023/8/28|

||子菜单|功能描述|||||
|-|-|-|-|-|-|-|
|无人机管理|设备管理|1\. 无人机管理输入 IP 地址绑定设备, 需要甲方提供可控无人机，数据链接许可，建立无人机编号， 2. 按照机场为一组显示无人机设备|||||
||任务管理|1\. 多机的巡逻航线、飞行任务、值班操作员、任务开始时间等信息编辑，为多机分配定时任务任务编辑\*\**可对飞行任务进行航点位置、载荷姿态、执行算法等进行详细编辑*\*\* 2. 任务库管理可创建、存储、删除、查看飞行任务库，\*\*\*可通过地图绘制、人工录入等不同方式创建飞行任务，形成任务库 3.\*\*\*无人机起飞机库开盖、上电、自检、传航线、航线成功、解锁、起飞、位置移动 5 米、关盖 4. 无人机飞回无人机失联 无人机管理正常返回，舱盖自动打开、停车（锁死）、归位、关电、关盖。 5. 机场控制包含开盖、关盖等远程控制； 链路控制包含频段切换、远程上下电等|||||
||信息库管理|含有航线库,任务库,执飞人员库(仅做查看和删除,不可进行编辑)|||||
||||||||
||||||||
||||||||
||||||||
||||||||

- 具体实现

  1\. 设备管理

  1. 按照机库分组,机库每组录入无人机设备  无人机机库一一对应

  2. 设备管理会显示些无人机连接基本状态等等

  2\. 任务管理

  1. 任务编辑 具体流程过程

  2. 任务执行

     1. 无人机起飞机库开盖、上电、自检、传航线、航线成功、解锁、起飞、位置移动 5 米、关盖 均为无人机传回信号, 仅展示信号

     2. 无人机飞回无人机失联,无人机管理正常返回，舱盖自动打开、停车（锁死）、归位、关电、关盖。

     3. 链路控制包含频段切换、远程上下电等

  3\. 信息库管理

  1. 显示现有的飞行人员列表 和创建的所有航线,任务列表(任务列表中,有本次任务的,航线,人员,无人机,显示)定时

  2. 

- 问题

* [ ] 任务编辑 具体流程过程

* [ ] 任务执行中,所有的机库信号和无人机信号展示

- 完成进度

* [ ] . 设备管理

* [ ] 按照机库分组,机库每组录入无人机设备

* [ ] 设备管理会显示些无人机连接基本状态等等

* [ ] 任务管理

* [ ] 任务编辑 具体流程过程

* [ ] 任务执行

* [ ] 无人机起飞机库开盖、上电、自检、传航线、航线成功、解锁、起飞、位置移动 5 米、关盖 均为无人机传回信号, 仅展示信号

* [ ] 无人机飞回无人机失联,无人机管理正常返回，舱盖自动打开、停车（锁死）、归位、关电、关盖。

* [ ] 机场控制包含开盖、关盖等远程控制； 链路控制包含频段切换、远程上下电等

* [ ] 信息库管理

* [ ] 显示现有的飞行人员列表 和创建的所有航线,任务列表(任务列表中,有本次任务的,航线,人员,无人机,显示)

- 任务编辑

```mermaid
graph TB


任务编辑--> 流程

任务编辑--->|是| 流程
```

---

### 3\.智能告警

|AI 智能告警-算法定制-人员检测|闵远洋|2023/9/4|2023/10/10|
|-|-|-|-|
|AI 智能告警-算法定制-人脸识别|闵远洋|2023/9/4|2023/10/10|
|AI 智能告警-算法定制-车辆检测|闵远洋|2023/9/4|2023/10/10|
|AI 智能告警-算法定制-火焰烟雾|闵远洋|2023/9/4|2023/10/10|
|AI 智能告警-算法定制-差异比对|闵远洋|2023/9/4|2023/10/10|
|AI 智能化软硬一体平台硬件联调|闵远洋|2023/9/25|2023/10/20|
|告警系统-告警分类融合|闵远洋|2023/9/11|2023/9/15|
|告警系统-告警 pdf 生成|闵远洋|2023/9/18|2023/9/22|

||子菜单|功能描述|||||
|-|-|-|-|-|-|-|
|智能告警|智能告警|1\. 告警信息列表:存储历史告警信息告警种类:1.车辆检测 2.入侵检测 3.火焰烟雾检测 4. 差异比对 2. 要素种类:1.时间 2.空间 3.目标属性 3. 告警等级:Debug：调试级别的告警信息，Info：普通信息级别的告警信息，Warning：警告级别的告警信息，。Error：错误级别的告警信息 Fatal：严重错误级别的告警信息，|||||
||||||||
||||||||
||||||||
||||||||

- 具体实施

  - 智能告警

    1. 告警种类:1.车辆检测 2.入侵检测 3.火焰烟雾检测划分 4. 差异比对要素种类

    2. 要素种类:1.时间 2.空间 3.目标属性

    3. 告警等级:Debug：调试级别的告警信息，Info：普通信息级别的告警信息，Warning：警告级别的告警信息，。Error：错误级别的告警信息 Fatal：严重错误级别的告警信息，

    4. 可以根据筛选的种类生成告警信息 pdf

- 问题

- 完成进度

* [ ] 智能告警

* [ ] 告警种类:1.车辆检测 2.入侵检测 3.火焰烟雾检测划分 4. 差异比对要素种类

* [ ] 要素种类:1.时间 2.空间 3.目标属性

* [ ] 告警等级:Debug：调试级别的告警信息，Info：普通信息级别的告警信息，Warning：警告级别的告警信息，。Error：错误级别的告警信息 Fatal：严重错误级别的告警信息

  - 可以根据筛选的种类生成告警信息 pdf

    ***

### 4\.巡检可视化大屏

|综合监控-无人机状态显示|闵远洋|2023/9/11|2023/9/15|
|-|-|-|-|
|综合监控-载荷状态显示|闵远洋|2023/9/13|2023/9/18|
|综合监控-机场状态显示|闵远洋|2023/8/20|2023/8/25|
|综合监控-机场控制|闵远洋|2023/9/19|2023/9/22|

||子菜单|内容|||||
|-|-|-|-|-|-|-|
|巡检可视化大屏|统计分析|无人机飞行时间、总时间、里程、总里程、发现异常事件数量等成果信息统计图表可视化。|||||
||态势感知|无人机当前的位置和状态信息，包括无人机的经纬度坐标、高度、航向、速度,电池等信息。机场状态显示包含气象、充放电状态、机库开启关闭状态等；告警与应急返航具备电压告警值预设功能，全程监控飞机电池，电压低于预设电压值时有明显的声光报警提示，电压低到设定报警压值时，无人机能够自主返航，通信链路状态显示包含信号强度、通信频段等|||||
||监控查看|多路海康监控数据,监控和回放功能：历史回放时间对齐存储，将载荷遥测、飞控遥测按时间对齐存储，可以通过播放形式，回看历史据需要展示飞行路线，每个时段飞行照片和路线上的报警 WEB 最多支持支持 6 路视频同屏显示|||||
||路线规划|1 航线规划在卫星地图上人工规划航线，显示航线距离起点的距离，航线可拖动、编辑；可在航点上叠加绘制载荷扫描航线|||||

- 具体实现

1. 统计分析

   1. 飞行时间、总时间、里程、总里程、发现异常事件数量等成果信息统计图表可视化

2. 态势感知

   1. 包括无人机的经纬度坐标、高度、航向、速度,电池等信息

   2. 机场状态显示包含气象、充放电状态、机库开启关闭状态等

   3. 实时告警信息,无人机返航,电量报警信息等

   4. 通信链路状态显示包含信号强度、通信频段

3. 监控查看

   1. 监控和回放功能,

   2. 查看历史数据需要展示飞行路线，每个时段飞行照片和路线上的报警

4. 路线规划

   1. 在卫星地图上人工规划航线，显示航线距离起点的距离，航线可拖动、编辑

   2. 可在航点上叠加绘制载荷扫描航线?

- 问题

* [ ] 统计分析具体数据展示布局

* [ ] 路线规划和 任务编辑的具体关系

* [ ] 完成进度

* [ ] 统计分析

* [ ] 飞行时间、总时间、里程、总里程、发现异常事件数量等成果信息统计图表可视化

* [ ] 态势感知

* [ ] 包括无人机的经纬度坐标、高度、航向、速度,电池等信息

* [ ] 机场状态显示包含气象、充放电状态、机库开启关闭状态等

* [ ] 实时告警信息,无人机返航,电量报警信息等

* [ ] 通信链路状态显示包含信号强度、通信频段

* [ ] 监控查看

* [ ] 监控和回放功能,

* [ ] 查看历史数据需要展示飞行路线，每个时段飞行照片和路线上的报警

* [ ] 路线规划

* [ ] 在卫星地图上人工规划航线，显示航线距离起点的距离，航线可拖动、编辑

* [ ] 可在航点上叠加绘制载荷扫描航线?